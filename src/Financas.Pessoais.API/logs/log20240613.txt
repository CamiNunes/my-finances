2024-06-13 14:16:35.631 -03:00 [INF] User profile is available. Using 'C:\Users\Usuário\AppData\Local\ASP.NET\DataProtection-Keys' as key repository and Windows DPAPI to encrypt keys at rest.
2024-06-13 14:16:36.511 -03:00 [INF] Now listening on: https://localhost:7192
2024-06-13 14:16:36.511 -03:00 [INF] Now listening on: http://localhost:5039
2024-06-13 14:16:36.513 -03:00 [INF] Application started. Press Ctrl+C to shut down.
2024-06-13 14:16:36.513 -03:00 [INF] Hosting environment: Development
2024-06-13 14:16:36.513 -03:00 [INF] Content root path: Z:\Freelas\projetos-reais\my-finances\src\Financas.Pessoais.API
2024-06-13 14:16:37.454 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/index.html - null null
2024-06-13 14:16:37.769 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/index.html - 200 null text/html;charset=utf-8 320.0511ms
2024-06-13 14:16:37.823 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_vs/browserLink - null null
2024-06-13 14:16:37.823 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - null null
2024-06-13 14:16:37.832 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_framework/aspnetcore-browser-refresh.js - 200 13778 application/javascript; charset=utf-8 8.4752ms
2024-06-13 14:16:37.867 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/_vs/browserLink - 200 null text/javascript; charset=UTF-8 43.9357ms
2024-06-13 14:16:38.084 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - null null
2024-06-13 14:16:38.229 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/swagger/v1/swagger.json - 200 null application/json;charset=utf-8 145.8039ms
2024-06-13 14:17:52.045 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Auth/login - application/json 63
2024-06-13 14:17:52.055 -03:00 [INF] CORS policy execution successful.
2024-06-13 14:17:52.832 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 14:17:52.852 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Financas.Pessoais.Domain.Models.LoginModel) on controller Financas.Pessoais.API.Controllers.AuthController (Financas.Pessoais.API).
2024-06-13 14:17:52.912 -03:00 [INF] Tentativa de login para o email: cvn.camila@outlook.com
2024-06-13 14:17:54.025 -03:00 [INF] Login bem-sucedido para o email: cvn.camila@outlook.com
2024-06-13 14:17:54.031 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-13 14:17:54.038 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API) in 1182.6199ms
2024-06-13 14:17:54.038 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 14:17:54.039 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Auth/login - 200 null application/json; charset=utf-8 1994.3956ms
2024-06-13 14:20:38.543 -03:00 [INF] Request starting HTTP/2 POST https://localhost:7192/api/Categorias/categoria - application/json 34
2024-06-13 14:20:38.546 -03:00 [INF] CORS policy execution successful.
2024-06-13 14:20:38.590 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.IncluirCategoria (Financas.Pessoais.API)'
2024-06-13 14:20:38.593 -03:00 [INF] Route matched with {action = "IncluirCategoria", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] IncluirCategoria(Financas.Pessoais.Domain.Models.InputModels.CategoriaInputModel) on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 14:21:05.819 -03:00 [INF] Iniciando a inclusão de uma nova categoria.
2024-06-13 14:25:39.491 -03:00 [INF] Categoria incluída com sucesso: Financas.Pessoais.Domain.Models.InputModels.CategoriaInputModel
2024-06-13 14:25:40.924 -03:00 [INF] Executing OkObjectResult, writing value of type 'Financas.Pessoais.Domain.Models.InputModels.CategoriaInputModel'.
2024-06-13 14:25:42.794 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.IncluirCategoria (Financas.Pessoais.API) in 304200.6375ms
2024-06-13 14:25:42.794 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.IncluirCategoria (Financas.Pessoais.API)'
2024-06-13 14:25:42.794 -03:00 [INF] Request finished HTTP/2 POST https://localhost:7192/api/Categorias/categoria - 200 null application/json; charset=utf-8 304253.5187ms
2024-06-13 14:26:10.387 -03:00 [INF] Request starting HTTP/2 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 14:26:10.391 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 14:26:10.394 -03:00 [INF] Route matched with {action = "ObterCategorias", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterCategorias() on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 14:26:13.911 -03:00 [INF] Endpoint 'ObterCategorias' foi chamado.
2024-06-13 14:26:38.286 -03:00 [INF] Categorias encontradas: [{"Id":"6a7ac043-e9a8-4ddd-9b13-045f835fe6b3","Descricao":"Investimentos","$type":"CategoriaViewModel"}]
2024-06-13 14:26:40.249 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Financas.Pessoais.Domain.Models.ViewModels.CategoriaViewModel, Financas.Pessoais.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-13 14:26:42.215 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API) in 31821.1729ms
2024-06-13 14:26:42.215 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 14:26:42.215 -03:00 [INF] Request finished HTTP/2 GET https://localhost:7192/api/Categorias/listar-categorias - 200 null application/json; charset=utf-8 31828.5144ms
2024-06-13 15:00:27.065 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7192/api/Auth/login - application/json 66
2024-06-13 15:00:27.066 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 15:00:27.067 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Financas.Pessoais.Domain.Models.LoginModel) on controller Financas.Pessoais.API.Controllers.AuthController (Financas.Pessoais.API).
2024-06-13 15:00:27.068 -03:00 [INF] Tentativa de login para o email: cvn.camila@outlook.com
2024-06-13 15:00:27.079 -03:00 [INF] Login bem-sucedido para o email: cvn.camila@outlook.com
2024-06-13 15:00:27.079 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-13 15:00:27.082 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API) in 14.8434ms
2024-06-13 15:00:27.082 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 15:00:27.082 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7192/api/Auth/login - 200 null application/json; charset=utf-8 16.9284ms
2024-06-13 15:01:02.879 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7192/api/Auth/login - application/json 67
2024-06-13 15:01:02.880 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 15:01:02.880 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Financas.Pessoais.Domain.Models.LoginModel) on controller Financas.Pessoais.API.Controllers.AuthController (Financas.Pessoais.API).
2024-06-13 15:01:02.882 -03:00 [INF] Tentativa de login para o email: cvn.camila@gmail.com
2024-06-13 15:01:02.886 -03:00 [INF] Login bem-sucedido para o email: cvn.camila@gmail.com
2024-06-13 15:01:02.886 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-13 15:01:02.887 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API) in 6.7685ms
2024-06-13 15:01:02.887 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 15:01:02.887 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7192/api/Auth/login - 200 null application/json; charset=utf-8 11.406ms
2024-06-13 15:01:32.818 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 15:01:32.823 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 15:01:32.824 -03:00 [INF] Route matched with {action = "ObterCategorias", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterCategorias() on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 15:01:35.405 -03:00 [INF] Endpoint 'ObterCategorias' foi chamado.
2024-06-13 15:01:35.409 -03:00 [INF] Categorias encontradas: [{"Id":"1d2770d4-5541-4a09-a298-cedabe1ffeb4","Descricao":"Academia","$type":"CategoriaViewModel"},{"Id":"f8e173d2-2348-4c32-a2b6-77cb308e1419","Descricao":"Contas de Casa","$type":"CategoriaViewModel"},{"Id":"5fa9c93e-481f-4845-86ff-165dd21b0ddb","Descricao":"Freelas","$type":"CategoriaViewModel"},{"Id":"8b2a2f35-98fb-4f38-a66b-174ff9ee5a00","Descricao":"Mercado","$type":"CategoriaViewModel"},{"Id":"dc208947-09c0-4fc1-a075-e2c2243d3bd1","Descricao":"Salário","$type":"CategoriaViewModel"}]
2024-06-13 15:01:35.409 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Financas.Pessoais.Domain.Models.ViewModels.CategoriaViewModel, Financas.Pessoais.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-13 15:01:35.410 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API) in 2586.0224ms
2024-06-13 15:01:35.410 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 15:01:35.410 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 200 null application/json; charset=utf-8 2592.3442ms
2024-06-13 15:01:41.412 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 15:01:41.412 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 15:01:41.412 -03:00 [INF] Route matched with {action = "ObterCategorias", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterCategorias() on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 15:01:41.412 -03:00 [INF] Endpoint 'ObterCategorias' foi chamado.
2024-06-13 15:01:41.415 -03:00 [INF] Categorias encontradas: [{"Id":"6a7ac043-e9a8-4ddd-9b13-045f835fe6b3","Descricao":"Investimentos","$type":"CategoriaViewModel"}]
2024-06-13 15:01:41.415 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Financas.Pessoais.Domain.Models.ViewModels.CategoriaViewModel, Financas.Pessoais.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-13 15:01:41.415 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API) in 3.0207ms
2024-06-13 15:01:41.415 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 15:01:41.416 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 200 null application/json; charset=utf-8 3.8558ms
2024-06-13 18:46:32.265 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 18:46:32.302 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/06/2024 20:00:27', Current time (UTC): '13/06/2024 21:46:32'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-06-13 18:46:32.609 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/06/2024 20:00:27', Current time (UTC): '13/06/2024 21:46:32'.
2024-06-13 18:46:32.611 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-06-13 18:46:39.633 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_5(JwtBearerChallengeContext context) in Z:\Freelas\projetos-reais\my-finances\src\Financas.Pessoais.API\Program.cs:line 85
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-13 18:46:39.651 -03:00 [WRN] The response has already started, the error page middleware will not be executed.
2024-06-13 18:46:39.653 -03:00 [ERR] Connection id "0HN4BPIAETF0U", Request id "0HN4BPIAETF0U:00000005": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_5(JwtBearerChallengeContext context) in Z:\Freelas\projetos-reais\my-finances\src\Financas.Pessoais.API\Program.cs:line 85
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2024-06-13 18:46:39.696 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 403 null application/json 7457.4162ms
2024-06-13 18:46:44.544 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7192/api/Auth/login - application/json 66
2024-06-13 18:46:44.544 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 18:46:44.544 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Financas.Pessoais.Domain.Models.LoginModel) on controller Financas.Pessoais.API.Controllers.AuthController (Financas.Pessoais.API).
2024-06-13 18:46:44.545 -03:00 [INF] Tentativa de login para o email: cvn.camila@outlook.com
2024-06-13 18:46:44.556 -03:00 [INF] Login bem-sucedido para o email: cvn.camila@outlook.com
2024-06-13 18:46:44.556 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-13 18:46:44.556 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API) in 12.0944ms
2024-06-13 18:46:44.556 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 18:46:44.557 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7192/api/Auth/login - 200 null application/json; charset=utf-8 13.0523ms
2024-06-13 18:46:56.156 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 18:46:56.156 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 18:46:56.156 -03:00 [INF] Route matched with {action = "ObterCategorias", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterCategorias() on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 18:46:56.156 -03:00 [INF] Endpoint 'ObterCategorias' foi chamado.
2024-06-13 18:46:56.159 -03:00 [INF] Categorias encontradas: [{"Id":"6a7ac043-e9a8-4ddd-9b13-045f835fe6b3","Descricao":"Investimentos","$type":"CategoriaViewModel"}]
2024-06-13 18:46:56.159 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Financas.Pessoais.Domain.Models.ViewModels.CategoriaViewModel, Financas.Pessoais.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-13 18:46:56.160 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API) in 3.3449ms
2024-06-13 18:46:56.160 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 18:46:56.160 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 200 null application/json; charset=utf-8 4.2247ms
2024-06-13 18:47:00.308 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 18:47:00.309 -03:00 [INF] Failed to validate the token.
Microsoft.IdentityModel.Tokens.SecurityTokenExpiredException: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/06/2024 20:01:02', Current time (UTC): '13/06/2024 21:47:00'.
   at Microsoft.IdentityModel.Tokens.Validators.ValidateLifetime(Nullable`1 notBefore, Nullable`1 expires, SecurityToken securityToken, TokenValidationParameters validationParameters)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateTokenPayloadAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
   at Microsoft.IdentityModel.JsonWebTokens.JsonWebTokenHandler.ValidateJWSAsync(JsonWebToken jsonWebToken, TokenValidationParameters validationParameters, BaseConfiguration configuration)
2024-06-13 18:47:00.309 -03:00 [INF] Bearer was not authenticated. Failure message: IDX10223: Lifetime validation failed. The token is expired. ValidTo (UTC): '13/06/2024 20:01:02', Current time (UTC): '13/06/2024 21:47:00'.
2024-06-13 18:47:00.310 -03:00 [INF] Authorization failed. These requirements were not met:
DenyAnonymousAuthorizationRequirement: Requires an authenticated user.
2024-06-13 18:47:02.614 -03:00 [ERR] An unhandled exception has occurred while executing the request.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_5(JwtBearerChallengeContext context) in Z:\Freelas\projetos-reais\my-finances\src\Financas.Pessoais.API\Program.cs:line 85
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
2024-06-13 18:47:02.615 -03:00 [WRN] The response has already started, the error page middleware will not be executed.
2024-06-13 18:47:02.615 -03:00 [ERR] Connection id "0HN4BPIAETF10", Request id "0HN4BPIAETF10:00000003": An unhandled exception was thrown by the application.
System.InvalidOperationException: StatusCode cannot be set because the response has already started.
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ThrowResponseAlreadyStartedException(String value)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.set_StatusCode(Int32 value)
   at Program.<>c.<<Main>$>b__0_5(JwtBearerChallengeContext context) in Z:\Freelas\projetos-reais\my-finances\src\Financas.Pessoais.API\Program.cs:line 85
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerEvents.Challenge(JwtBearerChallengeContext context)
   at Microsoft.AspNetCore.Authentication.JwtBearer.JwtBearerHandler.HandleChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationHandler`1.ChallengeAsync(AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authentication.AuthenticationService.ChallengeAsync(HttpContext context, String scheme, AuthenticationProperties properties)
   at Microsoft.AspNetCore.Authorization.Policy.AuthorizationMiddlewareResultHandler.<>c__DisplayClass0_0.<<HandleAsync>g__Handle|0>d.MoveNext()
--- End of stack trace from previous location ---
   at Microsoft.AspNetCore.Authorization.AuthorizationMiddleware.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Authentication.AuthenticationMiddleware.Invoke(HttpContext context)
   at Swashbuckle.AspNetCore.SwaggerUI.SwaggerUIMiddleware.Invoke(HttpContext httpContext)
   at Swashbuckle.AspNetCore.Swagger.SwaggerMiddleware.Invoke(HttpContext httpContext, ISwaggerProvider swaggerProvider)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.AspNetCore.Diagnostics.DeveloperExceptionPageMiddlewareImpl.Invoke(HttpContext context)
   at Microsoft.WebTools.BrowserLink.Net.BrowserLinkMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Watch.BrowserRefresh.BrowserRefreshMiddleware.InvokeAsync(HttpContext context)
   at Microsoft.AspNetCore.Server.Kestrel.Core.Internal.Http.HttpProtocol.ProcessRequests[TContext](IHttpApplication`1 application)
2024-06-13 18:47:02.616 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 403 null application/json 2307.5921ms
2024-06-13 18:47:10.863 -03:00 [INF] Request starting HTTP/1.1 POST https://localhost:7192/api/Auth/login - application/json 67
2024-06-13 18:47:10.863 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 18:47:10.863 -03:00 [INF] Route matched with {action = "Login", controller = "Auth"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] Login(Financas.Pessoais.Domain.Models.LoginModel) on controller Financas.Pessoais.API.Controllers.AuthController (Financas.Pessoais.API).
2024-06-13 18:47:10.864 -03:00 [INF] Tentativa de login para o email: cvn.camila@gmail.com
2024-06-13 18:47:10.870 -03:00 [INF] Login bem-sucedido para o email: cvn.camila@gmail.com
2024-06-13 18:47:10.871 -03:00 [INF] Executing OkObjectResult, writing value of type '<>f__AnonymousType0`2[[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e],[System.String, System.Private.CoreLib, Version=8.0.0.0, Culture=neutral, PublicKeyToken=7cec85d7bea7798e]]'.
2024-06-13 18:47:10.871 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API) in 7.5376ms
2024-06-13 18:47:10.871 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.AuthController.Login (Financas.Pessoais.API)'
2024-06-13 18:47:10.871 -03:00 [INF] Request finished HTTP/1.1 POST https://localhost:7192/api/Auth/login - 200 null application/json; charset=utf-8 8.135ms
2024-06-13 18:47:26.583 -03:00 [INF] Request starting HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - null null
2024-06-13 18:47:26.596 -03:00 [INF] Executing endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 18:47:26.596 -03:00 [INF] Route matched with {action = "ObterCategorias", controller = "Categorias"}. Executing controller action with signature System.Threading.Tasks.Task`1[Microsoft.AspNetCore.Mvc.IActionResult] ObterCategorias() on controller Financas.Pessoais.API.Controllers.CategoriasController (Financas.Pessoais.API).
2024-06-13 18:47:26.596 -03:00 [INF] Endpoint 'ObterCategorias' foi chamado.
2024-06-13 18:47:26.598 -03:00 [INF] Categorias encontradas: [{"Id":"1d2770d4-5541-4a09-a298-cedabe1ffeb4","Descricao":"Academia","$type":"CategoriaViewModel"},{"Id":"f8e173d2-2348-4c32-a2b6-77cb308e1419","Descricao":"Contas de Casa","$type":"CategoriaViewModel"},{"Id":"5fa9c93e-481f-4845-86ff-165dd21b0ddb","Descricao":"Freelas","$type":"CategoriaViewModel"},{"Id":"8b2a2f35-98fb-4f38-a66b-174ff9ee5a00","Descricao":"Mercado","$type":"CategoriaViewModel"},{"Id":"dc208947-09c0-4fc1-a075-e2c2243d3bd1","Descricao":"Salário","$type":"CategoriaViewModel"}]
2024-06-13 18:47:26.598 -03:00 [INF] Executing OkObjectResult, writing value of type 'System.Collections.Generic.List`1[[Financas.Pessoais.Domain.Models.ViewModels.CategoriaViewModel, Financas.Pessoais.Domain, Version=1.0.0.0, Culture=neutral, PublicKeyToken=null]]'.
2024-06-13 18:47:26.599 -03:00 [INF] Executed action Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API) in 2.8995ms
2024-06-13 18:47:26.599 -03:00 [INF] Executed endpoint 'Financas.Pessoais.API.Controllers.CategoriasController.ObterCategorias (Financas.Pessoais.API)'
2024-06-13 18:47:26.599 -03:00 [INF] Request finished HTTP/1.1 GET https://localhost:7192/api/Categorias/listar-categorias - 200 null application/json; charset=utf-8 17.326ms
